# プログラミングにおける分解（デコンポジション）

「分解（デコンポジション）」は、プログラミングにおいて重要なスキルです。初心者が問題解決で困難に直面するのは、能力が足りないからではなく、**「目の前の問題が大きすぎて、脳のメモリ（ワーキングメモリ）が処理しきれない」**ことが原因であると考えられます。

## 1. 「意味のある最小単位」まで刻む

プログラミングにおける分解とは、単に分けることではなく、 **「それ単体で説明・テストができるサイズ」** まで細かくすることです。

### 例：料理のレシピでの分解

**不適切な分解の例：** 「カレーを作る」

**適切な分解の例：** 
- 野菜を切る
- 肉を炒める
- 煮込む
- ルーを溶かす

### 分解の基準

ある処理がさらに2つ以上の手順に細分化できる場合、それは十分に細かく分解されていない状態を示しています。

## 2. 「入力・加工・出力」の三層分解

どんなに複雑なシステムも、基本はこの3つの連続です。

| ステップ | 検討事項 | 考慮点 |
|---------|--------|------|
| Input（入力） | 何が必要か | その処理を開始するために最低限必要なデータの特定 |
| Process（加工） | 何をするか | 受け取ったデータをどのような形に変換するかの定義 |
| Output（出力） | 何を返すか | 処理完了後、後続の処理に引き継ぐ情報の決定 |

## 3. 「境界線」を引く（モジュール化の芽）

分解したパーツ同士を密結合させないことも重要です。各パーツは独立した単位として設計される必要があります。

### 設計原則

それぞれのモジュールは、他のモジュールが最終的にどのように利用されるかを知る必要がありません。各モジュールは割り当てられた責務に専念し、インタフェースを通じてデータを受け渡します。

### 例

野菜を準備するモジュールは、その出力がカレーか肉じゃがかといった最終用途を意識する必要がなく、与えられた野菜を適切に処理して返すことのみに集中します。

この設計アプローチが、**「関心の分離」および「カプセル化」**の原則につながります。

## 4. 紙とペンによる設計

コードエディタで作業する際、開発者は構文（シンタックス）の詳細に注意が奪われやすくなります。

### 推奨される設計手法

1. コンピュータの補助なしで問題を分析する
2. 白い紙やワープロにやるべきことを自然言語で箇条書きにする
3. 箇条書きの各項目に対して、対応する処理構造（関数、ループなど）をメモする

### 重要な原則

自然言語で説明できない処理は、コードで実装することはできません。十分に明確な設計は、自然言語での記述から始まります。

## 学習用課題

### 課題1：リスト内の全要素の合計を計算する処理の分解

以下の処理を細かく分解してください。

**元の処理：** 「リストの全要素を足し算して合計を出す」

**求めること：**
- 「意味のある最小単位」まで分解する
- 各ステップを3〜5語程度で簡潔に説明する

**ヒント：** 最低でも4つ以上のステップに分解できるはずです。

### 課題2：「入力・加工・出力」の三層分解を適用する

以下の処理に対して、三層分解を行ってください。

**処理：** 「ユーザーが入力した数字のリストから、10以上の要素だけを抽出して、昇順でソートする」

**求めること：**

| ステップ | 検討事項 | 具体例 |
|---------|--------|------|
| Input | 何が必要か | ＿＿＿＿＿＿＿＿＿ |
| Process | 何をするか | ＿＿＿＿＿＿＿＿＿ |
| Output | 何を返すか | ＿＿＿＿＿＿＿＿＿ |

### 課題3：密結合を減らす設計を考える

以下のシナリオについて、各モジュールの責務を明確にしてください。

**シナリオ：** 学生の成績を管理するシステム
- 学生の情報を読み込む
- 各学生の平均点を計算する
- 成績が60点以上の学生を合格と判定する
- 結果をファイルに保存する

**求めること：**
- 上記の処理を独立したモジュール（責務）に分割する
- 各モジュールが知っておくべき情報と、知らなくてよい情報を明記する
- モジュール間の入出力を定義する

### 課題4：自然言語での設計練習

以下のいずれかを選択して、紙とペンを使って自然言語で設計してください。

**選択肢A：** 電話番号の妥当性を検証するプログラム
**選択肢B：** 日本の郵便番号から都道府県を判定するプログラム
**選択肢C：** テキストファイルから特定のキーワードを含む行を抽出するプログラム

**求めること：**
- 処理を自然言語で箇条書きする（最低10ステップ）
- 各ステップの横に、対応する処理構造を記述する
  - 例：「＜＝ 関数」、「＜＝ ループ」、「＜＝ 条件判定」
- 自分の言葉で「このステップは何をしているのか」を簡潔に説明できることを確認する

---

## 参考：課題の解答例

### 課題1の解答例

「リストの全要素の合計を計算する」の分解：

1. リストが有効か確認する
2. 合計用の変数を0で初期化する
3. リストの最初の要素から順番に処理する
4. 各要素を合計に加える
5. 全要素の処理が終わったか確認する
6. 計算結果を返す

（別解もあります）
